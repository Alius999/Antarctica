{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/just-validate.es.js","webpack:///./js/main.js","webpack:///./js/modules/modals/init-modals.js","webpack:///./js/modules/modals/modals.js","webpack:///./js/utils/focus-lock.js","webpack:///./js/utils/ios-checker.js","webpack:///./js/utils/ios-vh-fix.js","webpack:///./js/utils/scroll-lock.js"],"names":["__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__publicField","EMAIL_REGEXP","NUMBER_REGEXP","PASSWORD_REGEXP","STRONG_PASSWORD_REGEXP","isEmpty","newVal","trim","isEmail","test","isLengthMoreThanMax","len","length","isLengthLessThanMin","isNumber","isPassword","isStrongPassword","isNumberMoreThanMax","isNumberLessThanMin","Rules","Rules2","GroupRules","GroupRules2","CustomStyleTagIds","CustomStyleTagIds2","getDefaultFieldMessage","rule","ruleValue","Required","Email","MaxLength","replace","String","MinLength","Password","Number","StrongPassword","MaxNumber","MinNumber","MinFilesCount","MaxFilesCount","Files","getDefaultGroupMessage","isPromise","val","then","getNodeParents","el","elem","els","unshift","parentNode","getClosestParent","groups","parents","reversedParents","reverse","i","parent","group","groupElem","getClassList","classList","Array","isArray","filter","cls","split","errorLabelCss","TOOLTIP_ARROW_HEIGHT","defaultGlobalConfig","errorFieldStyle","color","border","errorFieldCssClass","successFieldCssClass","errorLabelStyle","errorLabelCssClass","successLabelCssClass","focusInvalidField","lockForm","testingMode","JustValidate","form","globalConfig","dictLocale","tooltips","forEach","item","refresh","lastScrollPosition","window","scrollY","isScrollTick","requestAnimationFrame","refreshAllTooltips","ev","preventDefault","isSubmitted","validateHandler","target","currentFieldName","fieldName","fields","field","validateField","currentGroup","currentGroupName","groupName","groupFields","elems","find","validateGroup","handleFieldChange","handleGroupChange","renderErrors","initialize","errors","isValid","errorLabels","successLabels","eventListeners","customStyleTags","document","querySelector","Error","setForm","HTMLFormElement","isTooltip","styleTag","createElement","textContent","Label","head","appendChild","addListener","handleDocumentScroll","str","_a","currentLocale","localisedStr","dict","fieldRule","msg","errorMessage","getElemValue","getLocalisedString","successMessage","groupRule","getFieldErrorMessage","getFieldSuccessMessage","getGroupErrorMessage","getGroupSuccessMessage","type","checked","files","every","setGroupInvalid","setGroupValid","afterInputChanged","elemValue","plugin","result","setFieldInvalid","console","error","num","isNaN","CustomRegexp","regexp","RegExp","e","isFinite","filesConfig","isFilePropsInvalid","file","fileConfig","minSizeInvalid","minSize","size","maxSizeInvalid","maxSize","nameInvalid","names","includes","name","extInvalid","extensions","typeInvalid","types","fileIdx","filesInvalid","validator","asyncCheckPending","promise","resp","catch","promises","rules","res","validateFieldRule","push","setFieldValid","config","Promise","allSettled","reject","resolve","finally","clearFieldStyle","clearFieldLabel","renderFieldError","validateGroupRule","setTimeout","focus","forceRevalidation","keys","afterSubmitValidation","validate","_b","unlockForm","onSuccessCallback","onFailCallback","setAttribute","removeListener","formSubmitHandler","handler","addEventListener","func","removeEventListener","values","join","setListeners","getListenerType","handlerChange","clearErrors","groupField","inputs","querySelectorAll","childrenInputs","from","input","elem2","isDirty","remove","_c","_d","errorStyle","style","successStyle","successFieldStyle","_a2","tooltip","disabled","pointerEvents","webkitFilter","getAttribute","removeAttribute","errorLabel","position","getBoundingClientRect","top","left","width","height","errorLabelRect","pos","dataset","direction","renderTooltip","innerHTML","customErrorLabelStyle","assign","add","testId","successLabel","customSuccessLabelStyle","successLabelStyle","label","errorsContainer","container","Element","isSuccess","renderedInErrorsContainer","renderErrorsContainer","_e","_f","_g","labelElem","parentElement","tagName","toLowerCase","isError","showLabels","message","createSuccessLabelElem","renderFieldLabel","createErrorLabelElem","_b2","renderGroupLabel","event","destroy","addField","locale","callback","iosVhFix","initModals","burgerIconOpen","burgerIconClose","headerList","headerLogo","overlay","mainHtml","display","fill","marginLeft","validation","onSuccess","getElementById","submit","validationModal","bookingPhone","allowSymbols","modals","settings","stopPlay","lockFocus","startFocus","focusBack","eventTimeout","openCallback","closeCallback","modalElements","Modals","_scrollLock","ScrollLock","_focusLock","FocusLock","_modalOpenElements","_openedModalElement","_modalName","_enableScrolling","_settingKey","_settings","_preventDefault","_stopPlay","_lockFocus","_startFocus","_focusBack","_eventTimeout","_openCallback","_closeCallback","_documentKeydownHandler","bind","_documentClickHandler","_modalClickHandler","_init","settingKey","evt","closest","openModal","open","isEscKey","close","modal","pause","contentWindow","postMessage","autoPlay","modalName","contains","_setSettings","disableScrolling","lock","_addListeners","_autoPlay","unlock","_removeListeners","_stopInteractive","enableScrolling","SELECTORS","_lockedSelector","_focusableElements","_endElement","_selectors","activeElement","blur","shiftKey","lockedSelector","lockedElement","startElement","returnFocus","focusLock","iosChecker","navigator","platform","userAgent","MSInputMethodContext","documentMode","vh","innerHeight","documentElement","setProperty","_iosChecker","_lockClass","_scrollTop","_fixedBlockElements","innerWidth","clientWidth","self","pageYOffset","ScrollTop","body","scrollTop","scroll","_getBodyScrollTop","_getScrollbarWidth","paddingRight","block","scrollTo","scrollLock"],"mappings":"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","file":"main.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/main.js\");\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst EMAIL_REGEXP = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\nconst NUMBER_REGEXP = /^[0-9]+$/;\nconst PASSWORD_REGEXP = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/;\nconst STRONG_PASSWORD_REGEXP = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/;\nconst isEmpty = (value) => {\n  let newVal = value;\n  if (typeof value === \"string\") {\n    newVal = value.trim();\n  }\n  return !newVal;\n};\nconst isEmail = (value) => {\n  return EMAIL_REGEXP.test(value);\n};\nconst isLengthMoreThanMax = (value, len) => {\n  return value.length > len;\n};\nconst isLengthLessThanMin = (value, len) => {\n  return value.length < len;\n};\nconst isNumber = (value) => {\n  return NUMBER_REGEXP.test(value);\n};\nconst isPassword = (value) => {\n  return PASSWORD_REGEXP.test(value);\n};\nconst isStrongPassword = (value) => {\n  return STRONG_PASSWORD_REGEXP.test(value);\n};\nconst isNumberMoreThanMax = (value, len) => {\n  return value > len;\n};\nconst isNumberLessThanMin = (value, len) => {\n  return value < len;\n};\nvar Rules = /* @__PURE__ */ ((Rules2) => {\n  Rules2[\"Required\"] = \"required\";\n  Rules2[\"Email\"] = \"email\";\n  Rules2[\"MinLength\"] = \"minLength\";\n  Rules2[\"MaxLength\"] = \"maxLength\";\n  Rules2[\"Password\"] = \"password\";\n  Rules2[\"Number\"] = \"number\";\n  Rules2[\"MaxNumber\"] = \"maxNumber\";\n  Rules2[\"MinNumber\"] = \"minNumber\";\n  Rules2[\"StrongPassword\"] = \"strongPassword\";\n  Rules2[\"CustomRegexp\"] = \"customRegexp\";\n  Rules2[\"MinFilesCount\"] = \"minFilesCount\";\n  Rules2[\"MaxFilesCount\"] = \"maxFilesCount\";\n  Rules2[\"Files\"] = \"files\";\n  return Rules2;\n})(Rules || {});\nvar GroupRules = /* @__PURE__ */ ((GroupRules2) => {\n  GroupRules2[\"Required\"] = \"required\";\n  return GroupRules2;\n})(GroupRules || {});\nvar CustomStyleTagIds = /* @__PURE__ */ ((CustomStyleTagIds2) => {\n  CustomStyleTagIds2[\"Label\"] = \"label\";\n  CustomStyleTagIds2[\"LabelArrow\"] = \"labelArrow\";\n  return CustomStyleTagIds2;\n})(CustomStyleTagIds || {});\nconst getDefaultFieldMessage = (rule, ruleValue) => {\n  switch (rule) {\n    case Rules.Required:\n      return \"The field is required\";\n    case Rules.Email:\n      return \"Email has invalid format\";\n    case Rules.MaxLength:\n      return \"The field must contain a maximum of :value characters\".replace(\":value\", String(ruleValue));\n    case Rules.MinLength:\n      return \"The field must contain a minimum of :value characters\".replace(\":value\", String(ruleValue));\n    case Rules.Password:\n      return \"Password must contain minimum eight characters, at least one letter and one number\";\n    case Rules.Number:\n      return \"Value should be a number\";\n    case Rules.StrongPassword:\n      return \"Password should contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character\";\n    case Rules.MaxNumber:\n      return \"Number should be less or equal than :value\".replace(\":value\", String(ruleValue));\n    case Rules.MinNumber:\n      return \"Number should be more or equal than :value\".replace(\":value\", String(ruleValue));\n    case Rules.MinFilesCount:\n      return \"Files count should be more or equal than :value\".replace(\":value\", String(ruleValue));\n    case Rules.MaxFilesCount:\n      return \"Files count should be less or equal than :value\".replace(\":value\", String(ruleValue));\n    case Rules.Files:\n      return \"Uploaded files have one or several invalid properties (extension/size/type etc)\";\n    default:\n      return \"Value is incorrect\";\n  }\n};\nconst getDefaultGroupMessage = (rule) => {\n  switch (rule) {\n    case GroupRules.Required:\n      return \"The field is required\";\n    default:\n      return \"Group is incorrect\";\n  }\n};\nconst isPromise = (val) => !!val && typeof val.then === \"function\";\nconst getNodeParents = (el) => {\n  let elem = el;\n  const els = [];\n  while (elem) {\n    els.unshift(elem);\n    elem = elem.parentNode;\n  }\n  return els;\n};\nconst getClosestParent = (groups, parents) => {\n  const reversedParents = [...parents].reverse();\n  for (let i = 0, len = reversedParents.length; i < len; ++i) {\n    const parent = reversedParents[i];\n    for (const key in groups) {\n      const group = groups[key];\n      if (group.groupElem === parent) {\n        return [key, group];\n      }\n    }\n  }\n  return null;\n};\nconst getClassList = (classList) => {\n  if (Array.isArray(classList)) {\n    return classList.filter((cls) => cls.length > 0);\n  }\n  if (typeof classList === \"string\" && classList.trim()) {\n    return [...classList.split(\" \").filter((cls) => cls.length > 0)];\n  }\n  return [];\n};\nconst errorLabelCss = `.just-validate-error-label[data-tooltip=true]{position:fixed;padding:4px 8px;background:#423f3f;color:#fff;white-space:nowrap;z-index:10;border-radius:4px;transform:translateY(-5px)}.just-validate-error-label[data-tooltip=true]:before{content:'';width:0;height:0;border-left:solid 5px transparent;border-right:solid 5px transparent;border-bottom:solid 5px #423f3f;position:absolute;z-index:3;display:block;bottom:-5px;transform:rotate(180deg);left:calc(50% - 5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]{transform:translateX(-5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]:before{right:-7px;bottom:auto;left:auto;top:calc(50% - 2px);transform:rotate(90deg)}.just-validate-error-label[data-tooltip=true][data-direction=right]{transform:translateX(5px)}.just-validate-error-label[data-tooltip=true][data-direction=right]:before{right:auto;bottom:auto;left:-7px;top:calc(50% - 2px);transform:rotate(-90deg)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]{transform:translateY(5px)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]:before{right:auto;bottom:auto;left:calc(50% - 5px);top:-5px;transform:rotate(0)}`;\nconst TOOLTIP_ARROW_HEIGHT = 5;\nconst defaultGlobalConfig = {\n  errorFieldStyle: {\n    color: \"#b81111\",\n    border: \"1px solid #B81111\"\n  },\n  errorFieldCssClass: \"just-validate-error-field\",\n  successFieldCssClass: \"just-validate-success-field\",\n  errorLabelStyle: {\n    color: \"#b81111\"\n  },\n  errorLabelCssClass: \"just-validate-error-label\",\n  successLabelCssClass: \"just-validate-success-label\",\n  focusInvalidField: true,\n  lockForm: true,\n  testingMode: false\n};\nclass JustValidate {\n  constructor(form, globalConfig, dictLocale) {\n    __publicField(this, \"form\", null);\n    __publicField(this, \"fields\", {});\n    __publicField(this, \"groupFields\", {});\n    __publicField(this, \"errors\", {});\n    __publicField(this, \"isValid\", false);\n    __publicField(this, \"isSubmitted\", false);\n    __publicField(this, \"globalConfig\", defaultGlobalConfig);\n    __publicField(this, \"errorLabels\", {});\n    __publicField(this, \"successLabels\", {});\n    __publicField(this, \"eventListeners\", []);\n    __publicField(this, \"dictLocale\", []);\n    __publicField(this, \"currentLocale\");\n    __publicField(this, \"customStyleTags\", {});\n    __publicField(this, \"onSuccessCallback\");\n    __publicField(this, \"onFailCallback\");\n    __publicField(this, \"tooltips\", []);\n    __publicField(this, \"lastScrollPosition\");\n    __publicField(this, \"isScrollTick\");\n    __publicField(this, \"refreshAllTooltips\", () => {\n      this.tooltips.forEach((item) => {\n        item.refresh();\n      });\n    });\n    __publicField(this, \"handleDocumentScroll\", () => {\n      this.lastScrollPosition = window.scrollY;\n      if (!this.isScrollTick) {\n        window.requestAnimationFrame(() => {\n          this.refreshAllTooltips();\n          this.isScrollTick = false;\n        });\n        this.isScrollTick = true;\n      }\n    });\n    __publicField(this, \"formSubmitHandler\", (ev) => {\n      ev.preventDefault();\n      this.isSubmitted = true;\n      this.validateHandler(ev);\n    });\n    __publicField(this, \"handleFieldChange\", (target) => {\n      let currentFieldName;\n      for (const fieldName in this.fields) {\n        const field = this.fields[fieldName];\n        if (field.elem === target) {\n          currentFieldName = fieldName;\n          break;\n        }\n      }\n      if (!currentFieldName) {\n        return;\n      }\n      this.validateField(currentFieldName, true);\n    });\n    __publicField(this, \"handleGroupChange\", (target) => {\n      let currentGroup;\n      let currentGroupName;\n      for (const groupName in this.groupFields) {\n        const group = this.groupFields[groupName];\n        if (group.elems.find((elem) => elem === target)) {\n          currentGroup = group;\n          currentGroupName = groupName;\n          break;\n        }\n      }\n      if (!currentGroup || !currentGroupName) {\n        return;\n      }\n      this.validateGroup(currentGroupName, currentGroup);\n    });\n    __publicField(this, \"handlerChange\", (ev) => {\n      if (!ev.target) {\n        return;\n      }\n      this.handleFieldChange(ev.target);\n      this.handleGroupChange(ev.target);\n      this.renderErrors();\n    });\n    this.initialize(form, globalConfig, dictLocale);\n  }\n  initialize(form, globalConfig, dictLocale) {\n    this.form = null;\n    this.errors = {};\n    this.isValid = false;\n    this.isSubmitted = false;\n    this.globalConfig = defaultGlobalConfig;\n    this.errorLabels = {};\n    this.successLabels = {};\n    this.eventListeners = [];\n    this.customStyleTags = {};\n    this.tooltips = [];\n    if (typeof form === \"string\") {\n      const elem = document.querySelector(form);\n      if (!elem) {\n        throw Error(`Form with ${form} selector not found! Please check the form selector`);\n      }\n      this.setForm(elem);\n    } else if (form instanceof HTMLFormElement) {\n      this.setForm(form);\n    } else {\n      throw Error(`Form selector is not valid. Please specify a string selector or a DOM element.`);\n    }\n    this.globalConfig = __spreadValues(__spreadValues({}, defaultGlobalConfig), globalConfig);\n    if (dictLocale) {\n      this.dictLocale = dictLocale;\n    }\n    if (this.isTooltip()) {\n      const styleTag = document.createElement(\"style\");\n      styleTag.textContent = errorLabelCss;\n      this.customStyleTags[CustomStyleTagIds.Label] = document.head.appendChild(styleTag);\n      this.addListener(\"scroll\", document, this.handleDocumentScroll);\n    }\n  }\n  getLocalisedString(str) {\n    var _a;\n    if (!this.currentLocale || !this.dictLocale.length) {\n      return str;\n    }\n    const localisedStr = (_a = this.dictLocale.find((item) => item.key === str)) == null ? void 0 : _a.dict[this.currentLocale];\n    return localisedStr || str;\n  }\n  getFieldErrorMessage(fieldRule, elem) {\n    const msg = typeof fieldRule.errorMessage === \"function\" ? fieldRule.errorMessage(this.getElemValue(elem), this.fields) : fieldRule.errorMessage;\n    return this.getLocalisedString(msg) || getDefaultFieldMessage(fieldRule.rule, fieldRule.value);\n  }\n  getFieldSuccessMessage(successMessage, elem) {\n    const msg = typeof successMessage === \"function\" ? successMessage(this.getElemValue(elem), this.fields) : successMessage;\n    return this.getLocalisedString(msg);\n  }\n  getGroupErrorMessage(groupRule) {\n    return this.getLocalisedString(groupRule.errorMessage) || getDefaultGroupMessage(groupRule.rule);\n  }\n  getGroupSuccessMessage(groupRule) {\n    return this.getLocalisedString(groupRule.successMessage);\n  }\n  setFieldInvalid(field, fieldRule) {\n    this.fields[field].isValid = false;\n    this.fields[field].errorMessage = this.getFieldErrorMessage(fieldRule, this.fields[field].elem);\n  }\n  setFieldValid(field, successMessage) {\n    this.fields[field].isValid = true;\n    if (successMessage !== void 0) {\n      this.fields[field].successMessage = this.getFieldSuccessMessage(successMessage, this.fields[field].elem);\n    }\n  }\n  setGroupInvalid(groupName, groupRule) {\n    this.groupFields[groupName].isValid = false;\n    this.groupFields[groupName].errorMessage = this.getGroupErrorMessage(groupRule);\n  }\n  setGroupValid(groupName, groupRule) {\n    this.groupFields[groupName].isValid = true;\n    this.groupFields[groupName].successMessage = this.getGroupSuccessMessage(groupRule);\n  }\n  getElemValue(elem) {\n    switch (elem.type) {\n      case \"checkbox\":\n        return elem.checked;\n      case \"file\":\n        return elem.files;\n      default:\n        return elem.value;\n    }\n  }\n  validateGroupRule(groupName, elems, groupRule) {\n    switch (groupRule.rule) {\n      case GroupRules.Required: {\n        if (elems.every((elem) => !elem.checked)) {\n          this.setGroupInvalid(groupName, groupRule);\n        } else {\n          this.setGroupValid(groupName, groupRule);\n        }\n      }\n    }\n  }\n  validateFieldRule(field, elem, fieldRule, afterInputChanged = false) {\n    const ruleValue = fieldRule.value;\n    const elemValue = this.getElemValue(elem);\n    if (fieldRule.plugin) {\n      const result = fieldRule.plugin(elemValue, this.fields);\n      if (!result) {\n        this.setFieldInvalid(field, fieldRule);\n      }\n      return;\n    }\n    switch (fieldRule.rule) {\n      case Rules.Required: {\n        if (isEmpty(elemValue)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.Email: {\n        if (typeof elemValue !== \"string\") {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (!isEmail(elemValue)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.MaxLength: {\n        if (ruleValue === void 0) {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field is not defined. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof ruleValue !== \"number\") {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] should be a number. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof elemValue !== \"string\") {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (elemValue === \"\") {\n          break;\n        }\n        if (isLengthMoreThanMax(elemValue, ruleValue)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.MinLength: {\n        if (ruleValue === void 0) {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field is not defined. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof ruleValue !== \"number\") {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] should be a number. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof elemValue !== \"string\") {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (elemValue === \"\") {\n          break;\n        }\n        if (isLengthLessThanMin(elemValue, ruleValue)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.Password: {\n        if (typeof elemValue !== \"string\") {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (elemValue === \"\") {\n          break;\n        }\n        if (!isPassword(elemValue)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.StrongPassword: {\n        if (typeof elemValue !== \"string\") {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (elemValue === \"\") {\n          break;\n        }\n        if (!isStrongPassword(elemValue)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.Number: {\n        if (typeof elemValue !== \"string\") {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (elemValue === \"\") {\n          break;\n        }\n        if (!isNumber(elemValue)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.MaxNumber: {\n        if (ruleValue === void 0) {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field is not defined. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof ruleValue !== \"number\") {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field should be a number. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof elemValue !== \"string\") {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (elemValue === \"\") {\n          break;\n        }\n        const num = +elemValue;\n        if (Number.isNaN(num) || isNumberMoreThanMax(num, ruleValue)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.MinNumber: {\n        if (ruleValue === void 0) {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field is not defined. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof ruleValue !== \"number\") {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field should be a number. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof elemValue !== \"string\") {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (elemValue === \"\") {\n          break;\n        }\n        const num = +elemValue;\n        if (Number.isNaN(num) || isNumberLessThanMin(num, ruleValue)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.CustomRegexp: {\n        if (ruleValue === void 0) {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field is not defined. This field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          return;\n        }\n        let regexp;\n        try {\n          regexp = new RegExp(ruleValue);\n        } catch (e) {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] should be a valid regexp. This field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        const str = String(elemValue);\n        if (str !== \"\" && !regexp.test(str)) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n        break;\n      }\n      case Rules.MinFilesCount: {\n        if (ruleValue === void 0) {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field is not defined. This field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof ruleValue !== \"number\") {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field should be a number. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (Number.isFinite(elemValue == null ? void 0 : elemValue.length) && elemValue.length < ruleValue) {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        break;\n      }\n      case Rules.MaxFilesCount: {\n        if (ruleValue === void 0) {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field is not defined. This field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (typeof ruleValue !== \"number\") {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field should be a number. The field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        if (Number.isFinite(elemValue == null ? void 0 : elemValue.length) && elemValue.length > ruleValue) {\n          this.setFieldInvalid(field, fieldRule);\n          break;\n        }\n        break;\n      }\n      case Rules.Files: {\n        if (ruleValue === void 0) {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field is not defined. This field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          return;\n        }\n        if (typeof ruleValue !== \"object\") {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field should be an object. This field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          return;\n        }\n        const filesConfig = ruleValue.files;\n        if (typeof filesConfig !== \"object\") {\n          console.error(`Value for ${fieldRule.rule} rule for [${field}] field should be an object with files array. This field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          return;\n        }\n        const isFilePropsInvalid = (file, fileConfig) => {\n          const minSizeInvalid = Number.isFinite(fileConfig.minSize) && file.size < fileConfig.minSize;\n          const maxSizeInvalid = Number.isFinite(fileConfig.maxSize) && file.size > fileConfig.maxSize;\n          const nameInvalid = Array.isArray(fileConfig.names) && !fileConfig.names.includes(file.name);\n          const extInvalid = Array.isArray(fileConfig.extensions) && !fileConfig.extensions.includes(file.name.split(\".\")[file.name.split(\".\").length - 1]);\n          const typeInvalid = Array.isArray(fileConfig.types) && !fileConfig.types.includes(file.type);\n          return minSizeInvalid || maxSizeInvalid || nameInvalid || extInvalid || typeInvalid;\n        };\n        if (typeof elemValue === \"object\" && elemValue !== null) {\n          for (let fileIdx = 0, len = elemValue.length; fileIdx < len; ++fileIdx) {\n            const file = elemValue.item(fileIdx);\n            if (!file) {\n              this.setFieldInvalid(field, fieldRule);\n              break;\n            }\n            const filesInvalid = isFilePropsInvalid(file, filesConfig);\n            if (filesInvalid) {\n              this.setFieldInvalid(field, fieldRule);\n              break;\n            }\n          }\n        }\n        break;\n      }\n      default: {\n        if (typeof fieldRule.validator !== \"function\") {\n          console.error(`Validator for custom rule for [${field}] field should be a function. This field will be always invalid.`);\n          this.setFieldInvalid(field, fieldRule);\n          return;\n        }\n        const result = fieldRule.validator(elemValue, this.fields);\n        if (typeof result !== \"boolean\" && typeof result !== \"function\") {\n          console.error(`Validator return value for [${field}] field should be boolean or function. It will be cast to boolean.`);\n        }\n        if (typeof result === \"function\") {\n          if (afterInputChanged) {\n            this.fields[field].asyncCheckPending = true;\n          } else {\n            this.fields[field].asyncCheckPending = false;\n            const promise = result();\n            if (!isPromise(promise)) {\n              console.error(`Validator function for custom rule for [${field}] field should return a Promise. This field will be always invalid.`);\n              this.setFieldInvalid(field, fieldRule);\n              return;\n            }\n            return promise.then((resp) => {\n              if (!resp) {\n                this.setFieldInvalid(field, fieldRule);\n              }\n            }).catch(() => {\n              this.setFieldInvalid(field, fieldRule);\n            });\n          }\n        }\n        if (!result) {\n          this.setFieldInvalid(field, fieldRule);\n        }\n      }\n    }\n  }\n  validateField(fieldName, afterInputChanged = false) {\n    var _a;\n    const field = this.fields[fieldName];\n    field.isValid = true;\n    const promises = [];\n    [...field.rules].reverse().forEach((rule) => {\n      const res = this.validateFieldRule(fieldName, field.elem, rule, afterInputChanged);\n      if (isPromise(res)) {\n        promises.push(res);\n      }\n    });\n    if (field.isValid) {\n      this.setFieldValid(fieldName, (_a = field.config) == null ? void 0 : _a.successMessage);\n    }\n    return Promise.allSettled(promises);\n  }\n  revalidateField(field) {\n    if (typeof field !== \"string\") {\n      throw Error(`Field selector is not valid. Please specify a string selector.`);\n    }\n    if (!this.fields[field]) {\n      console.error(`Field not found. Check the field selector.`);\n      return Promise.reject();\n    }\n    return new Promise((resolve) => {\n      this.validateField(field, true).finally(() => {\n        this.clearFieldStyle(field);\n        this.clearFieldLabel(field);\n        this.renderFieldError(field);\n        resolve(!!this.fields[field].isValid);\n      });\n    });\n  }\n  validateGroup(groupName, group) {\n    const promises = [];\n    [...group.rules].reverse().forEach((rule) => {\n      const res = this.validateGroupRule(groupName, group.elems, rule);\n      if (isPromise(res)) {\n        promises.push(res);\n      }\n    });\n    return Promise.allSettled(promises);\n  }\n  focusInvalidField() {\n    for (const fieldName in this.fields) {\n      const field = this.fields[fieldName];\n      if (!field.isValid) {\n        setTimeout(() => field.elem.focus(), 0);\n        break;\n      }\n    }\n  }\n  afterSubmitValidation(forceRevalidation = false) {\n    this.renderErrors(forceRevalidation);\n    if (this.globalConfig.focusInvalidField) {\n      this.focusInvalidField();\n    }\n  }\n  validate(forceRevalidation = false) {\n    return new Promise((resolve) => {\n      const promises = [];\n      Object.keys(this.fields).forEach((fieldName) => {\n        const promise = this.validateField(fieldName);\n        if (isPromise(promise)) {\n          promises.push(promise);\n        }\n      });\n      Object.keys(this.groupFields).forEach((groupName) => {\n        const group = this.groupFields[groupName];\n        const promise = this.validateGroup(groupName, group);\n        if (isPromise(promise)) {\n          promises.push(promise);\n        }\n      });\n      if (promises.length) {\n        Promise.allSettled(promises).then(() => {\n          this.afterSubmitValidation(forceRevalidation);\n          resolve(true);\n        });\n      } else {\n        this.afterSubmitValidation(forceRevalidation);\n        resolve(false);\n      }\n    });\n  }\n  revalidate() {\n    return new Promise((resolve) => {\n      this.validateHandler(void 0, true).finally(() => {\n        if (this.globalConfig.focusInvalidField) {\n          this.focusInvalidField();\n        }\n        resolve(this.isValid);\n      });\n    });\n  }\n  validateHandler(ev, forceRevalidation = false) {\n    if (this.globalConfig.lockForm) {\n      this.lockForm();\n    }\n    return this.validate(forceRevalidation).finally(() => {\n      var _a, _b;\n      if (this.globalConfig.lockForm) {\n        this.unlockForm();\n      }\n      if (this.isValid) {\n        (_a = this.onSuccessCallback) == null ? void 0 : _a.call(this, ev);\n      } else {\n        (_b = this.onFailCallback) == null ? void 0 : _b.call(this, this.fields, this.groupFields);\n      }\n    });\n  }\n  setForm(form) {\n    this.form = form;\n    this.form.setAttribute(\"novalidate\", \"novalidate\");\n    this.removeListener(\"submit\", this.form, this.formSubmitHandler);\n    this.addListener(\"submit\", this.form, this.formSubmitHandler);\n  }\n  addListener(type, elem, handler) {\n    elem.addEventListener(type, handler);\n    this.eventListeners.push({ type, elem, func: handler });\n  }\n  removeListener(type, elem, handler) {\n    elem.removeEventListener(type, handler);\n    this.eventListeners = this.eventListeners.filter((item) => item.type !== type || item.elem !== elem);\n  }\n  addField(field, rules, config) {\n    if (typeof field !== \"string\") {\n      throw Error(`Field selector is not valid. Please specify a string selector.`);\n    }\n    const elem = this.form.querySelector(field);\n    if (!elem) {\n      throw Error(`Field with ${field} selector not found! Please check the field selector.`);\n    }\n    if (!Array.isArray(rules) || !rules.length) {\n      throw Error(`Rules argument for the field [${field}] should be an array and should contain at least 1 element.`);\n    }\n    rules.forEach((item) => {\n      if (!(\"rule\" in item || \"validator\" in item || \"plugin\" in item)) {\n        throw Error(`Rules argument for the field [${field}] must contain at least one rule or validator property.`);\n      }\n      if (!item.validator && !item.plugin && (!item.rule || !Object.values(Rules).includes(item.rule))) {\n        throw Error(`Rule should be one of these types: ${Object.values(Rules).join(\", \")}. Provided value: ${item.rule}`);\n      }\n    });\n    this.fields[field] = {\n      elem,\n      rules,\n      isValid: void 0,\n      config\n    };\n    this.setListeners(elem);\n    if (this.isSubmitted) {\n      this.validate();\n    }\n    return this;\n  }\n  removeField(field) {\n    if (typeof field !== \"string\") {\n      throw Error(`Field selector is not valid. Please specify a string selector.`);\n    }\n    if (!this.fields[field]) {\n      console.error(`Field not found. Check the field selector.`);\n      return this;\n    }\n    const type = this.getListenerType(this.fields[field].elem.type);\n    this.removeListener(type, this.fields[field].elem, this.handlerChange);\n    this.clearErrors();\n    delete this.fields[field];\n    return this;\n  }\n  removeGroup(group) {\n    if (typeof group !== \"string\") {\n      throw Error(`Group selector is not valid. Please specify a string selector.`);\n    }\n    if (!this.groupFields[group]) {\n      console.error(`Group not found. Check the group selector.`);\n      return this;\n    }\n    this.groupFields[group].elems.forEach((elem) => {\n      const type = this.getListenerType(elem.type);\n      this.removeListener(type, elem, this.handlerChange);\n    });\n    this.clearErrors();\n    delete this.groupFields[group];\n    return this;\n  }\n  addRequiredGroup(groupField, errorMessage, config, successMessage) {\n    if (typeof groupField !== \"string\") {\n      throw Error(`Group selector is not valid. Please specify a string selector.`);\n    }\n    const elem = this.form.querySelector(groupField);\n    if (!elem) {\n      throw Error(`Group with ${groupField} selector not found! Please check the group selector.`);\n    }\n    const inputs = elem.querySelectorAll(\"input\");\n    const childrenInputs = Array.from(inputs).filter((input) => {\n      const parent = getClosestParent(this.groupFields, getNodeParents(input));\n      if (!parent) {\n        return true;\n      }\n      return parent[1].elems.find((elem2) => elem2 !== input);\n    });\n    this.groupFields[groupField] = {\n      rules: [\n        {\n          rule: GroupRules.Required,\n          errorMessage,\n          successMessage\n        }\n      ],\n      groupElem: elem,\n      elems: childrenInputs,\n      isDirty: false,\n      isValid: void 0,\n      config\n    };\n    inputs.forEach((input) => {\n      this.setListeners(input);\n    });\n    return this;\n  }\n  getListenerType(type) {\n    switch (type) {\n      case \"checkbox\":\n      case \"select-one\":\n      case \"file\":\n      case \"radio\": {\n        return \"change\";\n      }\n      default: {\n        return \"input\";\n      }\n    }\n  }\n  setListeners(elem) {\n    const type = this.getListenerType(elem.type);\n    this.removeListener(type, elem, this.handlerChange);\n    this.addListener(type, elem, this.handlerChange);\n  }\n  clearFieldLabel(fieldName) {\n    var _a, _b;\n    (_a = this.errorLabels[fieldName]) == null ? void 0 : _a.remove();\n    (_b = this.successLabels[fieldName]) == null ? void 0 : _b.remove();\n  }\n  clearFieldStyle(fieldName) {\n    var _a, _b, _c, _d;\n    const field = this.fields[fieldName];\n    const errorStyle = ((_a = field.config) == null ? void 0 : _a.errorFieldStyle) || this.globalConfig.errorFieldStyle;\n    Object.keys(errorStyle).forEach((key) => {\n      field.elem.style[key] = \"\";\n    });\n    const successStyle = ((_b = field.config) == null ? void 0 : _b.successFieldStyle) || this.globalConfig.successFieldStyle || {};\n    Object.keys(successStyle).forEach((key) => {\n      field.elem.style[key] = \"\";\n    });\n    field.elem.classList.remove(...getClassList(((_c = field.config) == null ? void 0 : _c.errorFieldCssClass) || this.globalConfig.errorFieldCssClass), ...getClassList(((_d = field.config) == null ? void 0 : _d.successFieldCssClass) || this.globalConfig.successFieldCssClass));\n  }\n  clearErrors() {\n    var _a, _b;\n    Object.keys(this.errorLabels).forEach((key) => this.errorLabels[key].remove());\n    Object.keys(this.successLabels).forEach((key) => this.successLabels[key].remove());\n    for (const fieldName in this.fields) {\n      this.clearFieldStyle(fieldName);\n    }\n    for (const groupName in this.groupFields) {\n      const group = this.groupFields[groupName];\n      const errorStyle = ((_a = group.config) == null ? void 0 : _a.errorFieldStyle) || this.globalConfig.errorFieldStyle;\n      Object.keys(errorStyle).forEach((key) => {\n        group.elems.forEach((elem) => {\n          var _a2;\n          elem.style[key] = \"\";\n          elem.classList.remove(...getClassList(((_a2 = group.config) == null ? void 0 : _a2.errorFieldCssClass) || this.globalConfig.errorFieldCssClass));\n        });\n      });\n      const successStyle = ((_b = group.config) == null ? void 0 : _b.successFieldStyle) || this.globalConfig.successFieldStyle || {};\n      Object.keys(successStyle).forEach((key) => {\n        group.elems.forEach((elem) => {\n          var _a2;\n          elem.style[key] = \"\";\n          elem.classList.remove(...getClassList(((_a2 = group.config) == null ? void 0 : _a2.successFieldCssClass) || this.globalConfig.successFieldCssClass));\n        });\n      });\n    }\n    this.tooltips = [];\n  }\n  isTooltip() {\n    return !!this.globalConfig.tooltip;\n  }\n  lockForm() {\n    const elems = this.form.querySelectorAll(\"input, textarea, button, select\");\n    for (let i = 0, len = elems.length; i < len; ++i) {\n      elems[i].setAttribute(\"data-just-validate-fallback-disabled\", elems[i].disabled ? \"true\" : \"false\");\n      elems[i].setAttribute(\"disabled\", \"disabled\");\n      elems[i].style.pointerEvents = \"none\";\n      elems[i].style.webkitFilter = \"grayscale(100%)\";\n      elems[i].style.filter = \"grayscale(100%)\";\n    }\n  }\n  unlockForm() {\n    const elems = this.form.querySelectorAll(\"input, textarea, button, select\");\n    for (let i = 0, len = elems.length; i < len; ++i) {\n      if (elems[i].getAttribute(\"data-just-validate-fallback-disabled\") !== \"true\") {\n        elems[i].removeAttribute(\"disabled\");\n      }\n      elems[i].style.pointerEvents = \"\";\n      elems[i].style.webkitFilter = \"\";\n      elems[i].style.filter = \"\";\n    }\n  }\n  renderTooltip(elem, errorLabel, position) {\n    var _a;\n    const { top, left, width, height } = elem.getBoundingClientRect();\n    const errorLabelRect = errorLabel.getBoundingClientRect();\n    const pos = position || ((_a = this.globalConfig.tooltip) == null ? void 0 : _a.position);\n    switch (pos) {\n      case \"left\": {\n        errorLabel.style.top = `${top + height / 2 - errorLabelRect.height / 2}px`;\n        errorLabel.style.left = `${left - errorLabelRect.width - TOOLTIP_ARROW_HEIGHT}px`;\n        break;\n      }\n      case \"top\": {\n        errorLabel.style.top = `${top - errorLabelRect.height - TOOLTIP_ARROW_HEIGHT}px`;\n        errorLabel.style.left = `${left + width / 2 - errorLabelRect.width / 2}px`;\n        break;\n      }\n      case \"right\": {\n        errorLabel.style.top = `${top + height / 2 - errorLabelRect.height / 2}px`;\n        errorLabel.style.left = `${left + width + TOOLTIP_ARROW_HEIGHT}px`;\n        break;\n      }\n      case \"bottom\": {\n        errorLabel.style.top = `${top + height + TOOLTIP_ARROW_HEIGHT}px`;\n        errorLabel.style.left = `${left + width / 2 - errorLabelRect.width / 2}px`;\n        break;\n      }\n    }\n    errorLabel.dataset.direction = pos;\n    const refresh = () => {\n      this.renderTooltip(elem, errorLabel, position);\n    };\n    return {\n      refresh\n    };\n  }\n  createErrorLabelElem(name, errorMessage, config) {\n    const errorLabel = document.createElement(\"div\");\n    errorLabel.innerHTML = errorMessage;\n    const customErrorLabelStyle = this.isTooltip() ? config == null ? void 0 : config.errorLabelStyle : (config == null ? void 0 : config.errorLabelStyle) || this.globalConfig.errorLabelStyle;\n    Object.assign(errorLabel.style, customErrorLabelStyle);\n    errorLabel.classList.add(...getClassList((config == null ? void 0 : config.errorLabelCssClass) || this.globalConfig.errorLabelCssClass), \"just-validate-error-label\");\n    if (this.isTooltip()) {\n      errorLabel.dataset.tooltip = \"true\";\n    }\n    if (this.globalConfig.testingMode) {\n      errorLabel.dataset.testId = `error-label-${name}`;\n    }\n    this.errorLabels[name] = errorLabel;\n    return errorLabel;\n  }\n  createSuccessLabelElem(name, successMessage, config) {\n    if (successMessage === void 0) {\n      return null;\n    }\n    const successLabel = document.createElement(\"div\");\n    successLabel.innerHTML = successMessage;\n    const customSuccessLabelStyle = (config == null ? void 0 : config.successLabelStyle) || this.globalConfig.successLabelStyle;\n    Object.assign(successLabel.style, customSuccessLabelStyle);\n    successLabel.classList.add(...getClassList((config == null ? void 0 : config.successLabelCssClass) || this.globalConfig.successLabelCssClass), \"just-validate-success-label\");\n    if (this.globalConfig.testingMode) {\n      successLabel.dataset.testId = `success-label-${name}`;\n    }\n    this.successLabels[name] = successLabel;\n    return successLabel;\n  }\n  renderErrorsContainer(label, errorsContainer) {\n    const container = errorsContainer || this.globalConfig.errorsContainer;\n    if (typeof container === \"string\") {\n      const elem = this.form.querySelector(container);\n      if (elem) {\n        elem.appendChild(label);\n        return true;\n      } else {\n        console.error(`Error container with ${container} selector not found. Errors will be rendered as usual`);\n      }\n    }\n    if (container instanceof Element) {\n      container.appendChild(label);\n      return true;\n    }\n    if (container !== void 0) {\n      console.error(`Error container not found. It should be a string or existing Element. Errors will be rendered as usual`);\n    }\n    return false;\n  }\n  renderGroupLabel(elem, label, errorsContainer, isSuccess) {\n    if (!isSuccess) {\n      const renderedInErrorsContainer = this.renderErrorsContainer(label, errorsContainer);\n      if (renderedInErrorsContainer) {\n        return;\n      }\n    }\n    elem.appendChild(label);\n  }\n  renderFieldLabel(elem, label, errorsContainer, isSuccess) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    if (!isSuccess) {\n      const renderedInErrorsContainer = this.renderErrorsContainer(label, errorsContainer);\n      if (renderedInErrorsContainer) {\n        return;\n      }\n    }\n    if (elem.type === \"checkbox\" || elem.type === \"radio\") {\n      const labelElem = document.querySelector(`label[for=\"${elem.getAttribute(\"id\")}\"]`);\n      if (((_b = (_a = elem.parentElement) == null ? void 0 : _a.tagName) == null ? void 0 : _b.toLowerCase()) === \"label\") {\n        (_d = (_c = elem.parentElement) == null ? void 0 : _c.parentElement) == null ? void 0 : _d.appendChild(label);\n      } else if (labelElem) {\n        (_e = labelElem.parentElement) == null ? void 0 : _e.appendChild(label);\n      } else {\n        (_f = elem.parentElement) == null ? void 0 : _f.appendChild(label);\n      }\n    } else {\n      (_g = elem.parentElement) == null ? void 0 : _g.appendChild(label);\n    }\n  }\n  showLabels(fields, isError) {\n    Object.keys(fields).forEach((fieldName, i) => {\n      const error = fields[fieldName];\n      const field = this.fields[fieldName];\n      field.isValid = !isError;\n      this.clearFieldStyle(fieldName);\n      this.clearFieldLabel(fieldName);\n      this.renderFieldError(fieldName, error);\n      if (i === 0 && this.globalConfig.focusInvalidField) {\n        setTimeout(() => field.elem.focus(), 0);\n      }\n    });\n  }\n  showErrors(fields) {\n    if (typeof fields !== \"object\") {\n      throw Error(\"[showErrors]: Errors should be an object with key: value format\");\n    }\n    this.showLabels(fields, true);\n  }\n  showSuccessLabels(fields) {\n    if (typeof fields !== \"object\") {\n      throw Error(\"[showSuccessLabels]: Labels should be an object with key: value format\");\n    }\n    this.showLabels(fields, false);\n  }\n  renderFieldError(fieldName, message) {\n    var _a, _b, _c, _d, _e, _f;\n    const field = this.fields[fieldName];\n    if (field.isValid) {\n      if (!field.asyncCheckPending) {\n        const successLabel = this.createSuccessLabelElem(fieldName, message !== void 0 ? message : field.successMessage, field.config);\n        if (successLabel) {\n          this.renderFieldLabel(field.elem, successLabel, (_a = field.config) == null ? void 0 : _a.errorsContainer, true);\n        }\n        field.elem.classList.add(...getClassList(((_b = field.config) == null ? void 0 : _b.successFieldCssClass) || this.globalConfig.successFieldCssClass));\n      }\n      return;\n    }\n    this.isValid = false;\n    field.elem.classList.add(...getClassList(((_c = field.config) == null ? void 0 : _c.errorFieldCssClass) || this.globalConfig.errorFieldCssClass));\n    const errorLabel = this.createErrorLabelElem(fieldName, message !== void 0 ? message : field.errorMessage, field.config);\n    this.renderFieldLabel(field.elem, errorLabel, (_d = field.config) == null ? void 0 : _d.errorsContainer);\n    if (this.isTooltip()) {\n      this.tooltips.push(this.renderTooltip(field.elem, errorLabel, (_f = (_e = field.config) == null ? void 0 : _e.tooltip) == null ? void 0 : _f.position));\n    }\n  }\n  renderErrors(forceRevalidation = false) {\n    var _a, _b, _c, _d;\n    if (!this.isSubmitted && !forceRevalidation) {\n      return;\n    }\n    this.clearErrors();\n    this.isValid = true;\n    for (const groupName in this.groupFields) {\n      const group = this.groupFields[groupName];\n      if (group.isValid) {\n        group.elems.forEach((elem) => {\n          var _a2, _b2;\n          Object.assign(elem.style, ((_a2 = group.config) == null ? void 0 : _a2.successFieldStyle) || this.globalConfig.successFieldStyle);\n          elem.classList.add(...getClassList(((_b2 = group.config) == null ? void 0 : _b2.successFieldCssClass) || this.globalConfig.successFieldCssClass));\n        });\n        const successLabel = this.createSuccessLabelElem(groupName, group.successMessage, group.config);\n        if (successLabel) {\n          this.renderGroupLabel(group.groupElem, successLabel, (_a = group.config) == null ? void 0 : _a.errorsContainer, true);\n        }\n        continue;\n      }\n      this.isValid = false;\n      group.elems.forEach((elem) => {\n        var _a2, _b2;\n        Object.assign(elem.style, ((_a2 = group.config) == null ? void 0 : _a2.errorFieldStyle) || this.globalConfig.errorFieldStyle);\n        elem.classList.add(...getClassList(((_b2 = group.config) == null ? void 0 : _b2.errorFieldCssClass) || this.globalConfig.errorFieldCssClass));\n      });\n      const errorLabel = this.createErrorLabelElem(groupName, group.errorMessage, group.config);\n      this.renderGroupLabel(group.groupElem, errorLabel, (_b = group.config) == null ? void 0 : _b.errorsContainer);\n      if (this.isTooltip()) {\n        this.tooltips.push(this.renderTooltip(group.groupElem, errorLabel, (_d = (_c = group.config) == null ? void 0 : _c.tooltip) == null ? void 0 : _d.position));\n      }\n    }\n    for (const fieldName in this.fields) {\n      this.renderFieldError(fieldName);\n    }\n  }\n  destroy() {\n    this.eventListeners.forEach((event) => {\n      this.removeListener(event.type, event.elem, event.func);\n    });\n    Object.keys(this.customStyleTags).forEach((key) => {\n      this.customStyleTags[key].remove();\n    });\n    this.clearErrors();\n    if (this.globalConfig.lockForm) {\n      this.unlockForm();\n    }\n  }\n  refresh() {\n    this.destroy();\n    if (!this.form) {\n      console.error(\"Cannot initialize the library! Form is not defined\");\n    } else {\n      this.initialize(this.form, this.globalConfig);\n      Object.keys(this.fields).forEach((key) => {\n        this.addField(key, [...this.fields[key].rules], this.fields[key].config);\n      });\n    }\n  }\n  setCurrentLocale(locale) {\n    if (typeof locale !== \"string\" && locale !== void 0) {\n      console.error(\"Current locale should be a string\");\n      return;\n    }\n    this.currentLocale = locale;\n    if (this.isSubmitted) {\n      this.validate();\n    }\n  }\n  onSuccess(callback) {\n    this.onSuccessCallback = callback;\n    return this;\n  }\n  onFail(callback) {\n    this.onFailCallback = callback;\n    return this;\n  }\n}\nexport { JustValidate as default };\n","import {iosVhFix} from './utils/ios-vh-fix';\nimport {initModals} from './modules/modals/init-modals';\nimport JustValidate from './just-validate.es';\n\n// ---------------------------------\n\nwindow.addEventListener('DOMContentLoaded', () => {\n\n  // Utils\n  // ---------------------------------\n\n  iosVhFix();\n\n  // Modules\n  // ---------------------------------\n\n  // все скрипты должны быть в обработчике 'DOMContentLoaded', но не все в 'load'\n  // в load следует добавить скрипты, не участвующие в работе первого экрана\n  window.addEventListener('load', () => {\n    initModals();\n  });\n});\n\nconst burgerIconOpen = document.querySelector('.header__burger-icon--open');\nconst burgerIconClose = document.querySelector('.header__burger-icon--close');\nconst headerList = document.querySelector('.header__list');\nconst headerLogo = document.querySelector('.header__logo');\nconst overlay = document.querySelector('.overlay');\nconst mainHtml = document.querySelector('.page');\n\n// If JS disabled\n\nheaderList.classList.remove('header__list--no-js');\n\n// Open/Close menu\n\nburgerIconClose.addEventListener('click', () => {\n  burgerIconClose.style.display = 'none';\n  burgerIconOpen.style.display = 'block';\n  headerList.style.display = 'none';\n  headerLogo.style.fill = '#F9FBFD';\n  headerLogo.style.marginLeft = 0;\n  overlay.classList.add('visually-hidden');\n  mainHtml.classList.remove('page__hidden');\n});\n\nburgerIconOpen.addEventListener('click', () => {\n  burgerIconClose.style.display = 'block';\n  burgerIconOpen.style.display = 'none';\n  headerList.style.display = 'block';\n  headerLogo.style.fill = '#011C40';\n  headerLogo.style.marginLeft = 36;\n  mainHtml.classList.add('page__hidden');\n  overlay.classList.remove('visually-hidden');\n});\n\noverlay.addEventListener('click', () => {\n  burgerIconClose.style.display = 'none';\n  burgerIconOpen.style.display = 'block';\n  headerList.style.display = 'none';\n  headerLogo.style.fill = '#F9FBFD';\n  headerLogo.style.marginLeft = 0;\n  overlay.classList.add('visually-hidden');\n  mainHtml.classList.remove('page__hidden');\n});\n\n// Validation\n\nconst validation = new JustValidate('#booking-form', {\n  errorFieldCssClass: 'is-invalid',\n});\n\nvalidation\n    .addField('#booking-form__name', [\n      {\n        rule: 'minLength',\n        value: 3,\n        errorMessage: 'В имени должно быть больше трёх букв',\n      },\n      {\n        rule: 'maxLength',\n        value: 30,\n      },\n      {\n        rule: 'required',\n        errorMessage: 'Укажите Ваше имя',\n      },\n      {\n        rule: 'required',\n      }\n    ])\n    .addField('#booking-form__email', [\n      {\n        rule: 'minLength',\n        value: 3,\n        errorMessage: 'В имени должно быть больше трёх букв',\n      },\n      {\n        rule: 'maxLength',\n        value: 30,\n      },\n      {\n        rule: 'required',\n        errorMessage: 'Укажите Ваше имя',\n      },\n      {\n        rule: 'required',\n      }\n    ])\n    .addField('#agreement', [\n      {\n        rule: 'required',\n        errorMessage: 'Вы должны согласиться с правилами',\n      },\n      {\n        rule: 'required',\n      }\n    ])\n    .addField('#booking-form__phone-number', [\n      {\n        rule: 'required',\n        errorMessage: 'Укажите Ваш телефон',\n      },\n      {\n        rule: 'minLength',\n        value: 16,\n        errorMessage: 'Неверный формат',\n      },\n      {\n        rule: 'maxLength',\n        value: 18,\n      },\n      {\n        rule: 'required',\n      }\n    ])\n    .onSuccess((event) => {\n      document.getElementById(\"booking-form\").submit();\n    });\n\n    // // Валидация модального окна\n\nconst validationModal = new JustValidate('#modal-window');\n\nvalidationModal\n    .addField('#modal-name', [\n      {\n        rule: 'minLength',\n        value: 3,\n        errorMessage: 'В имени должно быть больше трёх букв',\n      },\n      {\n        rule: 'maxLength',\n        value: 30,\n      },\n      {\n        rule: 'required',\n        errorMessage: 'Укажите Ваше имя',\n      }\n    ])\n    .addField('#rules', [\n      {\n        rule: 'required',\n        errorMessage: 'Вы должны согласиться с правилами',\n      }\n    ])\n    validationModal\n    .addField('#modal-email', [\n      {\n        rule: 'minLength',\n        value: 3,\n        errorMessage: 'В имени должно быть больше трёх букв',\n      },\n      {\n        rule: 'maxLength',\n        value: 30,\n      },\n      {\n        rule: 'required',\n        errorMessage: 'Укажите Ваше имя',\n      }\n    ])\n    .addField('#modal-phone', [\n      {\n        rule: 'required',\n        errorMessage: 'Укажите Ваш телефон',\n      },\n      {\n        rule: 'minLength',\n        value: 16,\n        errorMessage: 'Неверный формат',\n      },\n      {\n        rule: 'maxLength',\n        value: 18,\n      }\n    ])\n\n.onSuccess((event) => {\n  document.getElementById(\"modal-window\").submit();\n});\n\n// Only numbers in phone fields\n\nconst bookingPhone = document.querySelector('#booking-form__phone-number'); // Получаем input\nconst allowSymbols = /[0-9]/g; // регулярка только цифры\n\nbookingPhone.addEventListener('keyup', () => {\n  bookingPhone.value = bookingPhone.value.replace(/[^,+\\d]/g,'');\n})\n\n// ---------------------------------\n\n// ❗❗❗ обязательно установите плагины eslint, stylelint, editorconfig в редактор кода.\n\n// привязывайте js не на классы, а на дата атрибуты (data-validate)\n\n// вместо модификаторов .block--active используем утилитарные классы\n// .is-active || .is-open || .is-invalid и прочие (обязателен нейминг в два слова)\n// .select.select--opened ❌ ---> [data-select].is-open ✅\n\n// выносим все в дата атрибуты\n// url до иконок пинов карты, настройки автопрокрутки слайдера, url к json и т.д.\n\n// для адаптивного JS используется matchMedia и addListener\n// const breakpoint = window.matchMedia(`(min-width:1024px)`);\n// const breakpointChecker = () => {\n//   if (breakpoint.matches) {\n//   } else {\n//   }\n// };\n// breakpoint.addListener(breakpointChecker);\n// breakpointChecker();\n\n// используйте .closest(el)\n","import {Modals} from './modals';\n\nlet modals;\n\n// Здесь реализован пример открытия модалки через колбэк закрытия\n// const openModalInCloseCallback = (name, context = this) => {\n//   context._enableScrolling = false;\n//   context._setSettings('default');\n//   modals.open(name);\n// };\n\n// closeCallback() {\n//   openModalInCloseCallback('modal-5');\n// },\n\nconst settings = {\n  'default': {\n    preventDefault: true,\n    stopPlay: true,\n    lockFocus: true,\n    startFocus: true,\n    focusBack: true,\n    eventTimeout: 400,\n    openCallback: false,\n    closeCallback: false,\n  },\n};\n\nconst initModals = () => {\n  const modalElements = document.querySelectorAll('.modal');\n  modalElements.forEach((el) => {\n    setTimeout(() => {\n      el.classList.remove('modal--preload');\n    }, 100);\n  });\n  modals = new Modals(settings);\n  // Используйте в разработке экспортируемую переменную modals, window сделан для бэкэнда\n  window.modals = modals;\n};\n\nexport {modals, initModals};\n","import {ScrollLock} from '../../utils/scroll-lock';\nimport {FocusLock} from '../../utils/focus-lock';\n\nexport class Modals {\n  constructor(settings = {}) {\n    this._scrollLock = new ScrollLock();\n    this._focusLock = new FocusLock();\n\n    this._modalOpenElements = document.querySelectorAll('[data-open-modal]');\n    this._openedModalElement = null;\n    this._modalName = null;\n    this._enableScrolling = true;\n    this._settingKey = 'default';\n\n    this._settings = settings;\n    this._preventDefault = this._settings[this._settingKey].preventDefault;\n    this._stopPlay = this._settings[this._settingKey].stopPlay;\n    this._lockFocus = this._settings[this._settingKey].lockFocus;\n    this._startFocus = this._settings[this._settingKey].startFocus;\n    this._focusBack = this._settings[this._settingKey].focusBack;\n    this._eventTimeout = this._settings[this._settingKey].eventTimeout;\n    this._openCallback = this._settings[this._settingKey].openCallback;\n    this._closeCallback = this._settings[this._settingKey].closeCallback;\n\n    this._documentKeydownHandler = this._documentKeydownHandler.bind(this);\n    this._documentClickHandler = this._documentClickHandler.bind(this);\n    this._modalClickHandler = this._modalClickHandler.bind(this);\n\n    this._init();\n  }\n\n  _init() {\n    if (this._modalOpenElements.length) {\n      document.addEventListener('click', this._documentClickHandler);\n    }\n  }\n\n  _setSettings(settingKey = this._settingKey) {\n    if (!this._settings[settingKey]) {\n      return;\n    }\n\n    this._preventDefault =\n      typeof this._settings[settingKey].preventDefault === 'boolean'\n        ? this._settings[settingKey].preventDefault\n        : this._settings[this._settingKey].preventDefault;\n    this._stopPlay =\n      typeof this._settings[settingKey].stopPlay === 'boolean'\n        ? this._settings[settingKey].stopPlay\n        : this._settings[this._settingKey].stopPlay;\n    this._lockFocus =\n      typeof this._settings[settingKey].lockFocus === 'boolean'\n        ? this._settings[settingKey].lockFocus\n        : this._settings[this._settingKey].lockFocus;\n    this._startFocus =\n      typeof this._settings[settingKey].startFocus === 'boolean'\n        ? this._settings[settingKey].startFocus\n        : this._settings[this._settingKey].startFocus;\n    this._focusBack =\n      typeof this._settings[settingKey].lockFocus === 'boolean'\n        ? this._settings[settingKey].focusBack\n        : this._settings[this._settingKey].focusBack;\n    this._eventTimeout =\n      typeof this._settings[settingKey].eventTimeout === 'number'\n        ? this._settings[settingKey].eventTimeout\n        : this._settings[this._settingKey].eventTimeout;\n    this._openCallback = this._settings[settingKey].openCallback || this._settings[this._settingKey].openCallback;\n    this._closeCallback = this._settings[settingKey].closeCallback || this._settings[this._settingKey].closeCallback;\n  }\n\n  _documentClickHandler(evt) {\n    const target = evt.target;\n\n    if (!target.closest('[data-open-modal]')) {\n      return;\n    }\n\n    evt.preventDefault();\n\n    this._modalName = target.closest('[data-open-modal]').dataset.openModal;\n\n    if (!this._modalName) {\n      return;\n    }\n\n    this.open();\n  }\n\n  _documentKeydownHandler(evt) {\n    const isEscKey = evt.key === 'Escape' || evt.key === 'Esc';\n\n    if (isEscKey) {\n      evt.preventDefault();\n      this.close(document.querySelector('.modal.is-active').dataset.modal);\n    }\n  }\n\n  _modalClickHandler(evt) {\n    const target = evt.target;\n\n    if (!target.closest('[data-close-modal]')) {\n      return;\n    }\n\n    this.close(target.closest('[data-modal]').dataset.modal);\n  }\n\n  _addListeners(modal) {\n    modal.addEventListener('click', this._modalClickHandler);\n    document.addEventListener('keydown', this._documentKeydownHandler);\n  }\n\n  _removeListeners(modal) {\n    modal.removeEventListener('click', this._modalClickHandler);\n    document.removeEventListener('keydown', this._documentKeydownHandler);\n  }\n\n  _stopInteractive(modal) {\n    if (this._stopPlay) {\n      modal.querySelectorAll('video, audio').forEach((el) => el.pause());\n      modal.querySelectorAll('[data-iframe]').forEach((el) => {\n        el.querySelector('iframe').contentWindow.postMessage('{\"event\": \"command\", \"func\": \"pauseVideo\", \"args\": \"\"}', '*');\n      });\n    }\n  }\n\n  _autoPlay(modal) {\n    modal.querySelectorAll('[data-iframe]').forEach((el) => {\n      const autoPlay = el.closest('[data-auto-play]');\n      if (autoPlay) {\n        el.querySelector('iframe').contentWindow.postMessage('{\"event\":\"command\",\"func\":\"playVideo\",\"args\":\"\"}', '*');\n      }\n    });\n  }\n\n  open(modalName = this._modalName) {\n    const modal = document.querySelector(`[data-modal=\"${modalName}\"]`);\n\n    if (!modal || modal.classList.contains('is-active')) {\n      return;\n    }\n\n    document.removeEventListener('click', this._documentClickHandler);\n\n    this._openedModalElement = document.querySelector('.modal.is-active');\n\n    if (this._openedModalElement) {\n      this._enableScrolling = false;\n      this.close(this._openedModalElement.dataset.modal);\n    }\n\n    this._setSettings(modalName);\n    modal.classList.add('is-active');\n\n    if (!this._openedModalElement) {\n      this._scrollLock.disableScrolling();\n    }\n\n    if (this._openCallback) {\n      this._openCallback();\n    }\n\n    if (this._lockFocus) {\n      this._focusLock.lock('.modal.is-active', this._startFocus);\n    }\n\n    setTimeout(() => {\n      this._addListeners(modal);\n      this._autoPlay(modal);\n      document.addEventListener('click', this._documentClickHandler);\n    }, this._eventTimeout);\n  }\n\n  close(modalName = this._modalName) {\n    const modal = document.querySelector(`[data-modal=\"${modalName}\"]`);\n    document.removeEventListener('click', this._documentClickHandler);\n\n    if (!modal || !modal.classList.contains('is-active')) {\n      return;\n    }\n\n    if (this._lockFocus) {\n      this._focusLock.unlock(this._focusBack);\n    }\n\n    modal.classList.remove('is-active');\n    this._removeListeners(modal);\n    this._stopInteractive(modal);\n\n    if (this._closeCallback) {\n      this._closeCallback();\n    }\n\n    if (this._enableScrolling) {\n      setTimeout(() => {\n        this._scrollLock.enableScrolling();\n      }, this._eventTimeout);\n    }\n\n    setTimeout(() => {\n      document.addEventListener('click', this._documentClickHandler);\n    }, this._eventTimeout);\n\n    this._setSettings('default');\n    this._enableScrolling = true;\n  }\n}\n","const SELECTORS = [\n  'a[href]',\n  'area[href]',\n  'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])',\n  'select:not([disabled]):not([aria-hidden])',\n  'textarea:not([disabled]):not([aria-hidden])',\n  'button:not([disabled]):not([aria-hidden])',\n  'iframe',\n  'object',\n  'embed',\n  '[contenteditable]',\n  '[tabindex]:not([tabindex^=\"-\"])'\n];\n\nexport class FocusLock {\n  constructor() {\n    this._lockedSelector = null;\n    this._focusableElements = null;\n    this._endElement = null;\n    this._selectors = SELECTORS;\n\n    this._documentKeydownHandler = this._documentKeydownHandler.bind(this);\n  }\n\n  _documentKeydownHandler(evt) {\n    const activeElement = document.activeElement;\n    if (evt.key === 'Tab') {\n      if (!this._focusableElements.length) {\n        evt.preventDefault();\n        activeElement.blur();\n        return;\n      }\n      if (this._focusableElements.length === 1) {\n        evt.preventDefault();\n        this._focusableElements[0].focus();\n        return;\n      }\n      if (this._focusableElements.length > 1 && !activeElement.closest(this._lockedSelector)) {\n        evt.preventDefault();\n        this._focusableElements[0].focus();\n        return;\n      }\n    }\n    if (evt.key === 'Tab' && !evt.shiftKey && activeElement === this._focusableElements[this._focusableElements.length - 1]) {\n      evt.preventDefault();\n      this._focusableElements[0].focus();\n    }\n    if (evt.key === 'Tab' && evt.shiftKey && activeElement === this._focusableElements[0]) {\n      evt.preventDefault();\n      this._focusableElements[this._focusableElements.length - 1].focus();\n    }\n  }\n\n  lock(lockedSelector, startFocus = true) {\n    this.unlock();\n    this._lockedSelector = lockedSelector;\n    const lockedElement = document.querySelector(this._lockedSelector);\n    if (!lockedElement) {\n      return;\n    }\n    this._focusableElements = lockedElement.querySelectorAll(this._selectors);\n    this._endElement = document.activeElement;\n    const startElement = lockedElement.querySelector('[data-focus]') || this._focusableElements[0];\n    if (this._endElement) {\n      this._endElement.blur();\n    }\n    if (startElement && startFocus) {\n      startElement.focus();\n    }\n    document.addEventListener('keydown', this._documentKeydownHandler);\n  }\n\n  unlock(returnFocus = true) {\n    if (this._endElement && returnFocus) {\n      this._endElement.focus();\n    }\n    this._lockedSelector = null;\n    this._focusableElements = null;\n    this._endElement = null;\n    document.removeEventListener('keydown', this._documentKeydownHandler);\n  }\n}\n\nwindow.focusLock = new FocusLock();\n","export const iosChecker = () => {\n  return [\n    'iPad Simulator',\n    'iPhone Simulator',\n    'iPod Simulator',\n    'iPad',\n    'iPhone',\n    'iPod'\n  ].includes(navigator.platform)\n  // iPad on iOS 13 detection\n  || (navigator.userAgent.includes('Mac') && 'ontouchend' in document);\n};\n","import {iosChecker} from './ios-checker';\n\nconst iosVhFix = () => {\n  if (!(!!window.MSInputMethodContext && !!document.documentMode)) {\n    if (iosChecker()) {\n      let vh = window.innerHeight * 0.01;\n      document.documentElement.style.setProperty('--vh', `${vh}px`);\n\n      window.addEventListener('resize', function () {\n        vh = window.innerHeight * 0.01;\n        document.documentElement.style.setProperty('--vh', `${vh}px`);\n      });\n    }\n  }\n};\n\nexport {iosVhFix};\n","import {iosChecker} from './ios-checker';\n\nexport class ScrollLock {\n  constructor() {\n    this._iosChecker = iosChecker;\n    this._lockClass = this._iosChecker() ? 'scroll-lock-ios' : 'scroll-lock';\n    this._scrollTop = null;\n    this._fixedBlockElements = document.querySelectorAll('[data-fix-block]');\n  }\n\n  _getScrollbarWidth() {\n    return window.innerWidth - document.documentElement.clientWidth;\n  }\n\n  _getBodyScrollTop() {\n    return (\n      self.pageYOffset ||\n      (document.documentElement && document.documentElement.ScrollTop) ||\n      (document.body && document.body.scrollTop)\n    );\n  }\n\n  disableScrolling() {\n    this._scrollTop = document.body.dataset.scroll = document.body.dataset.scroll ? document.body.dataset.scroll : this._getBodyScrollTop();\n    if (this._getScrollbarWidth()) {\n      document.body.style.paddingRight = `${this._getScrollbarWidth()}px`;\n      this._fixedBlockElements.forEach((block) => {\n        block.style.paddingRight = `${this._getScrollbarWidth()}px`;\n      });\n    }\n    document.body.style.top = `-${this._scrollTop}px`;\n    document.body.classList.add(this._lockClass);\n  }\n\n  enableScrolling() {\n    document.body.classList.remove(this._lockClass);\n    window.scrollTo(0, +document.body.dataset.scroll);\n    document.body.style.paddingRight = null;\n    document.body.style.top = null;\n    this._fixedBlockElements.forEach((block) => {\n      block.style.paddingRight = null;\n    });\n    document.body.removeAttribute('data-scroll');\n    this._scrollTop = null;\n  }\n}\n\nwindow.scrollLock = new ScrollLock();\n"],"sourceRoot":""}